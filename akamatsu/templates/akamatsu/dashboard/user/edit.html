{% extends "akamatsu/dashboard/layout.html" %}
{% from "akamatsu/_macros.html" import render_field, render_checkbox_field, render_submit_field %}

{% block title %}User editor{% endblock %}
{% block mini %}.users{% endblock %}

{# User editor #}
{% block content %}

{% if status == 'error' %}
<div class="grid grid-pad">
    <h2>{{ errmsg }}</h2>
</div>
{% else %}

{# Status #}
{% if status == 'saveerror' %}
<div class="grid grid-pad aka-msg-warning">
    <div class="col-1-1">
        <span>{{ errmsg }}</span>
    </div>
</div>
{% endif %}

{% if status == 'saved' %}
<div class="grid grid-pad aka-msg-success">
    <div class="col-1-1">
        <span>User saved correctly</span>
    </div>
</div>
{% endif %}


{# Delete button #}
{% if mode == 'edit' %}
<div class="grid grid-pad">
    <div class="col-2-12 push-right">
        <a href="{{ url_for('dashboard.user_delete', user_id=user_id) }}" class="aka-btn-warning plainlink">
            <i class="glyph-trash"></i> Delete user
        </a>
    </div>
</div>
{% endif %}


<form action="" method="POST" role="form">
    {{ form.hidden_tag() }}


    {{ render_field(form.username) }}

    {{ render_field(form.email) }}

    {{ render_field(form.password) }}

    {{ render_field(form.reset_password_token) }}


    <div class="grid">
        <div class="col-1-1 aka-form-group">
            <hr/>
        </div>
    </div>


    {{ render_field(form.role_list) }}

    {{ render_field(form.first_name) }}

    {{ render_field(form.last_name) }}


    <div class="grid grid-pad">
        <div class="col-1-2">
            {{ render_checkbox_field(form.is_enabled) }}
        </div>
        <div class="col-1-2">
            {{ render_checkbox_field(form.notify_login) }}
        </div>
    </div>

    {{ render_field(form.confirmed_at, is_date=true) }}

    {{ render_field(form.personal_bio) }}


    <div class="grid grid-pad">
        <div class="col-1-3 push-1-3">
            <input type="submit" class="aka-btn-primary" value="Save">
        </div>
    </div>
</form>
{% endif %}

{% endblock %}
