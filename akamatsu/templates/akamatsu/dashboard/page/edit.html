{% extends "akamatsu/dashboard/layout.html" %}
{% from "akamatsu/_macros.html" import render_field, render_checkbox_field, render_submit_field %}

{% block title %}Page editor{% endblock %}
{% block mini %}.pages{% endblock %}

{# Page editor #}
{% block content %}

{% if status == 'error' %}
<div class="grid grid-pad">
    <div class="col-1-1 aka-msg-warning">
        <span>{{ errmsg }}</span>
    </div>
</div>
{% else %}


{# Status #}
{% if status == 'saveerror' %}
<div class="grid grid-pad aka-msg-warning">
    <div class="col-1-1">
        <span>{{ errmsg }}</span>
    </div>
</div>
{% endif %}

{% if status == 'saved' %}
<div class="grid grid-pad aka-msg-success">
    <div class="col-1-1">
        <span>Page saved correctly</span>
    </div>
</div>
{% endif %}


{# Delete button #}
{% if mode == 'edit' %}
<div class="grid grid-pad">
    <div class="col-2-12 push-right">
        <a href="{{ url_for('dashboard.page_delete', page_id=page_id) }}" class="aka-btn-warning plainlink">
            <i class="fa fa-trash"></i> Delete page
        </a>
    </div>
</div>
{% endif %}


<form action="" method="POST" role="form">
    {{ form.hidden_tag() }}


    {{ render_field(form.title) }}

    {{ render_field(form.mini) }}

    {{ render_field(form.content) }}

    {{ render_field(form.custom_head) }}

    {{ render_field(form.ghost) }}

    {{ render_field(form.base_route) }}

    {{ render_field(form.slug) }}

    <div class="grid grid-pad">
        <div class="col-1-5">
            {{ render_checkbox_field(form.is_root) }}
        </div>
        <div class="col-1-5">
            {{ render_checkbox_field(form.is_html) }}
        </div>
        <div class="col-1-5">
            {{ render_checkbox_field(form.use_layout_header) }}
        </div>
        <div class="col-1-5">
            {{ render_checkbox_field(form.is_published) }}
        </div>
        <div class="col-4-5">
            {{ render_checkbox_field(form.comments_enabled) }}
        </div>
    </div>

    {{ render_field(form.timestamp, is_date=true) }}


    <div class="grid grid-pad">
        <div class="col-1-3 push-1-3">
            <input type="submit" class="aka-btn-primary" value="Save">
        </div>
    </div>
</form>
{% endif %}

{% endblock %}
