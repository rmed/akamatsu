{% from "akamatsu/_macros.html" import favicon_tags %}

<!DOCTYPE HTML>
<html>
<head>
    {# Favicon #}
    {{ favicon_tags() }}

    {# Minified CSS #}
    {% assets "css_pack" %}
        <link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}"/>
    {% endassets %}

    {# Minified dashboard specific JS #}
    {% assets "db_js_pack" %}
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.1.6/zepto.min.js"></script>
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
    <title>{% block title %}{% endblock %} | {{ config['SITENAME'] }} dashboard</title>

    {# Meta tags #}
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>

    {# Miscenlaneous stuff #}
    {% block custom_header %}{% endblock %}
</head>

<body>
    {# Header #}
    <header class="aka-header">
        <h1 class="aka-sitename"># dashboard{% block mini %}{% endblock %}</h1>

        <nav class="aka-overbox">
            {# Only for admins #}
            {% if current_user.has_role('admin') %}
                <a class="fa fa-cog" href="{{ url_for('dashboard.settings_show') }}"></a>
            {% endif %}

            <a class="fa fa-user" href="{{ url_for('dashboard.profile_edit') }}"></a>
            <a class="fa fa-sign-out" href="{{ url_for('user.logout') }}"></a>
        </nav>
    </header>

    {# Dashboard links #}
    <div id="aka-db-links" class="grid grid-pad">
        <div class="col-1-10">
            <a class="aka-db-navlink" href="{{ url_for('dashboard.home') }}">
                  <i class="fa fa-home"></i> Home
            </a>
        </div>

        {% if current_user.has_role('blogger') or current_user.has_role('superblogger') or current_user.has_role('admin') %}
            <div class="col-1-10">
                <a class="aka-db-navlink" href="{{ url_for('dashboard.blog_index') }}">
                    <i class="fa fa-comments-o"></i> Blog
                </a>
            </div>
        {% endif %}

        {% if current_user.has_role('editor') or current_user.has_role('admin') %}
            <div class="col-1-10">
                <a class="aka-db-navlink" href="{{ url_for('dashboard.page_index') }}">
                    <i class="fa fa-book"></i> Pages
                </a>
            </div>
        {% endif %}

        {% if current_user.has_role('uploader') or current_user.has_role('superuploader') or current_user.has_role('admin') %}
            <div class="col-1-10">
                <a class="aka-db-navlink" href="{{ url_for('dashboard.file_index') }}">
                    <i class="fa fa-paperclip"></i> Files
                </a>
            </div>
        {% endif %}

        {% if current_user.has_role('admin') %}
            <div class="col-1-10">
                <a class="aka-db-navlink" href="{{ url_for('dashboard.user_index') }}">
                    <i class="fa fa-users"></i> Users
                </a>
            </div>
        {% endif %}

        <div class="col-3-10 push-right">
            <span>Logged in as: {{ current_user.username }}</span>
        </div>
    </div>


    <div class="grid grid-pad">
        <div class="col-1-1">
            <h3>{{ self.title() }}</h3>
        </div>
    </div>

    {# Main content #}
    {% block content %}{% endblock %}

    {# Footer #}
    <footer>
        <div class="aka-footer">
            <div class="grid grid-pad">
                <div id="footer-right" class="col-1-3 push-right">
                    Built with <a href="https://github.com/rmed/akamatsu" target="_blank">akamatsu</a>
                </div>
            </div>
        </div>
    </footer>
</body>
</html>
